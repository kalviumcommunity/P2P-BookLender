mysql> insert into Users (name,email,country,mobile)
    -> values ('Nikhil Jose','hi@nikjos.in','IN','8989898989');
Query OK, 1 row affected (0.02 sec)


mysql> select * from Users where id=2;
+----+-------------+--------------+---------+------------+
| id | name        | email        | country | mobile     |
+----+-------------+--------------+---------+------------+
|  2 | Nikhil Jose | hi@nikjos.in | IN      | 8989898989 |
+----+-------------+--------------+---------+------------+
1 row in set (0.00 sec)


mysql> insert into Authors (name)
    -> values ('Paulo Coelho'),('James Clear');
Query OK, 2 rows affected (0.02 sec)
Records: 2  Duplicates: 0  Warnings: 0

mysql> insert into Authors (name)
    -> values ('Deepinder Goyal'),('Naina Sahni'),('Ashish Goel');
Query OK, 3 rows affected (0.02 sec)
Records: 3  Duplicates: 0  Warnings: 0

mysql> insert into Books (name,isbn)
    -> values ('CULTure at Zomato: How to Rewire Your Brain for Greatness','935345171X');
Query OK, 1 row affected (0.01 sec)

mysql> insert into TitleAuthors (book,author,is_primary)
    -> values (1,3,1),(1,4,0),(1,5,0);
Query OK, 3 rows affected (0.02 sec)
Records: 3  Duplicates: 0  Warnings: 0


mysql> insert into Inventory (book,owner)
    -> values (1,2);
Query OK, 1 row affected (0.01 sec)

mysql> insert into Users (name,email,country,mobile)
    -> values 
    -> ('Elon Musk','elon@example.com','US','1212121212'),
    -> ('Linus Sebastian','ltt@example.com','CA','1212121212');
Query OK, 2 rows affected (0.02 sec)
Records: 2  Duplicates: 0  Warnings: 0

mysql> insert into Inventory (book,owner)
    -> values (1,4),(1,3);
Query OK, 2 rows affected (0.01 sec)
Records: 2  Duplicates: 0  Warnings: 0


mysql> select i.id as inv_id, b.name as book, u.name as owner, i.status as status
    -> from Inventory i 
    -> inner join Books b on b.id=i.book 
    -> inner join Users u on u.id=i.owner
    -> where status='nolend';
+--------+-----------------------------------------------------------+-----------------+--------+
| inv_id | book                                                      | owner           | status |
+--------+-----------------------------------------------------------+-----------------+--------+
|      2 | CULTure at Zomato: How to Rewire Your Brain for Greatness | Nikhil Jose     | nolend |
|      3 | CULTure at Zomato: How to Rewire Your Brain for Greatness | Linus Sebastian | nolend |
|      4 | CULTure at Zomato: How to Rewire Your Brain for Greatness | Elon Musk       | nolend |
+--------+-----------------------------------------------------------+-----------------+--------+
3 rows in set (0.01 sec)


mysql> update Inventory 
    -> set status='available'
    -> where id=3;
Query OK, 1 row affected (0.01 sec)
Rows matched: 1  Changed: 1  Warnings: 0

mysql> select i.id as inv_id, b.name as book, u.name as owner, i.status as status
    -> from Inventory i 
    -> inner join Books b on b.id=i.book 
    -> inner join Users u on u.id=i.owner
    -> where status='nolend';
+--------+-----------------------------------------------------------+-------------+--------+
| inv_id | book                                                      | owner       | status |
+--------+-----------------------------------------------------------+-------------+--------+
|      2 | CULTure at Zomato: How to Rewire Your Brain for Greatness | Nikhil Jose | nolend |
|      4 | CULTure at Zomato: How to Rewire Your Brain for Greatness | Elon Musk   | nolend |
+--------+-----------------------------------------------------------+-------------+--------+
2 rows in set (0.01 sec)


mysql> insert into Books (name,isbn)
    -> values 
    -> ('The Alchemist','9788172234980'),
    -> ('Atomic Habits','1847941834');
Query OK, 2 rows affected (0.03 sec)
Records: 2  Duplicates: 0  Warnings: 0

mysql> select * from Books;
+----+-----------------------------------------------------------+---------------+
| id | name                                                      | isbn          |
+----+-----------------------------------------------------------+---------------+
|  1 | CULTure at Zomato: How to Rewire Your Brain for Greatness | 935345171X    |
|  2 | The Alchemist                                             | 9788172234980 |
|  3 | Atomic Habits                                             | 1847941834    |
+----+-----------------------------------------------------------+---------------+
3 rows in set (0.01 sec)

mysql> select * from Authors;
+----+-----------------+
| id | name            |
+----+-----------------+
|  1 | Paulo Coelho    |
|  2 | James Clear     |
|  3 | Deepinder Goyal |
|  4 | Naina Sahni     |
|  5 | Ashish Goel     |
+----+-----------------+
5 rows in set (0.00 sec)

mysql> insert into TitleAuthors (book,author,is_primary)
    -> values (2,1,1),(3,2,1);
Query OK, 2 rows affected (0.01 sec)
Records: 2  Duplicates: 0  Warnings: 0


mysql> select i.id as inv_id, b.name as book, u.name as owner, i.status as status
    -> from Inventory i 
    -> inner join Books b on b.id=i.book 
    -> inner join Users u on u.id=i.owner
    -> where status='available' and b.id=1;
+--------+-----------------------------------------------------------+-----------------+-----------+
| inv_id | book                                                      | owner           | status    |
+--------+-----------------------------------------------------------+-----------------+-----------+
|      3 | CULTure at Zomato: How to Rewire Your Brain for Greatness | Linus Sebastian | available |
+--------+-----------------------------------------------------------+-----------------+-----------+
1 row in set (0.01 sec)

mysql> select i.id as inv_id, b.name as book, u.name as owner, i.status as status from Inventory i  inner join Books b on b.id=i.book  inner join Users u on u.id=i.owner where status='available';
+--------+-----------------------------------------------------------+-----------------+-----------+
| inv_id | book                                                      | owner           | status    |
+--------+-----------------------------------------------------------+-----------------+-----------+
|      3 | CULTure at Zomato: How to Rewire Your Brain for Greatness | Linus Sebastian | available |
|      8 | The Alchemist                                             | Elon Musk       | available |
+--------+-----------------------------------------------------------+-----------------+-----------+
2 rows in set (0.00 sec)


mysql> select b.name as title, a.name as author
    -> from Books b
    -> right join TitleAuthors ta on ta.book=b.id
    -> right join Authors a on ta.author=a.id
    -> where ta.is_primary=true;
+-----------------------------------------------------------+-----------------+
| title                                                     | author          |
+-----------------------------------------------------------+-----------------+
| CULTure at Zomato: How to Rewire Your Brain for Greatness | Deepinder Goyal |
| The Alchemist                                             | Paulo Coelho    |
| Atomic Habits                                             | James Clear     |
+-----------------------------------------------------------+-----------------+
3 rows in set (0.01 sec)

